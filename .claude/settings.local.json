{
  "permissions": {
    "allow": [
      "Bash(sbcl:*)",
      "Bash(claude mcp add:*)",
      "Bash(claude mcp:*)",
      "Bash(echo '{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":3,\"\"method\"\":\"\"tools/call\"\",\"\"params\"\":{\"\"name\"\":\"\"evaluate-lisp\"\",\"\"arguments\"\":{\"\"code\"\":\"\"\\(defun factorial \\(n\\) \\(if \\(<= n 1\\) 1 \\(* n \\(factorial \\(1- n\\)\\)\\)\\)\\) \\(mapcar #'\"''\"'factorial \\(loop for i from 1 to 10 collect i\\)\\)\"\"}}}')",
      "mcp__lisp__evaluate-lisp",
      "WebFetch(domain:localhost)",
      "mcp__lisp__describe-symbol",
      "mcp__lisp__reset-session",
      "mcp__lisp__apropos-search",
      "mcp__lisp__class-info",
      "Bash(curl:*)",
      "Bash(python:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "mcp__lisp__load-system",
      "Bash(git push)",
      "Bash(tasklist:*)",
      "Bash(taskkill:*)",
      "Bash(cmd //c \"cd /d D:\\\\common-lisp\\\\mblogic-cl && start sbcl --eval \"\"\\(ql:quickload :mblogic-cl-web\\)\"\" --eval \"\"\\(mblogic-cl-web:quick-start \\\\\"\"test/plcprog.txt\\\\\"\" :port 8080\\)\"\"\")",
      "mcp__lisp__load-file",
      "mcp__lisp__list-local-systems",
      "mcp__plugin_playwright_playwright__browser_navigate",
      "mcp__plugin_playwright_playwright__browser_click",
      "mcp__plugin_playwright_playwright__browser_wait_for",
      "mcp__plugin_playwright_playwright__browser_snapshot",
      "mcp__plugin_playwright_playwright__browser_console_messages",
      "mcp__plugin_playwright_playwright__browser_network_requests",
      "mcp__plugin_playwright_playwright__browser_select_option",
      "mcp__plugin_playwright_playwright__browser_evaluate",
      "mcp__plugin_playwright_playwright__browser_take_screenshot",
      "mcp__lisp__compile-form",
      "mcp__plugin_playwright_playwright__browser_close",
      "WebFetch(domain:mblogic.sourceforge.net)",
      "mcp__plugin_playwright_playwright__browser_press_key",
      "mcp__lisp__quickload",
      "mcp__lisp__describe-last-error",
      "mcp__lisp__validate-syntax",
      "Bash(python3 -m json.tool:*)",
      "Bash(grep:*)",
      "Bash(tr:*)",
      "Bash(git checkout:*)",
      "Bash(pkill:*)",
      "Bash(find:*)",
      "Bash(/Users/gregorybrooks/common-lisp/mblogic-cl/static/css/ladder.css << 'EOF'\n/* Ladder Display CSS for MBLogic-CL */\n\n/* Monitor page buttons */\n.laddermonitorbuttons {\n    font-size: 125%;\n    padding-top: 2px;\n    padding-bottom: 2px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.control-panel {\n    margin: 10px 0;\n    padding: 10px;\n    background-color: #f0f0f0;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n}\n\n.btn-monitor, .btn-start, .btn-stop, .btn-step {\n    margin: 5px;\n    padding: 8px 15px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n/* Subroutine selector */\n.subroutine-selector {\n    margin-top: 10px;\n}\n\n.subroutine-selector label {\n    margin-right: 10px;\n}\n\n.subroutine-selector select {\n    padding: 5px;\n    font-size: 14px;\n}\n\n/* Rung Number Area - KEY STYLING FOR RUNG DISPLAY */\n.rungnumberarea {\n    width: 100%;\n    background-color: olivedrab;\n    border-radius: 10px;\n    font-size: 125%;\n    font-weight: bold;\n    margin: 15px 0 5px 0;\n    padding: 5px 10px;\n    border: 2px solid #555;\n    display: block;\n}\n\n.rungnumberarea p {\n    padding: 5px 10px;\n    margin: 0;\n    color: white;\n    font-weight: bold;\n}\n\n/* Comment Area */\n.commentarea {\n    width: 100%;\n    background-color: wheat;\n    border-radius: 10px;\n    margin: 5px 0 10px 0;\n    padding: 5px 10px;\n    border: 1px solid #999;\n}\n\n.commentarea p {\n    padding: 5px 10px;\n    margin: 0;\n    font-style: italic;\n}\n\n/* SVG Ladder Diagram Styling */\n#staticrunglist {\n    margin-top: 20px;\n}\n\n#staticrunglist svg {\n    display: block;\n    width: 100%;\n    max-width: 1200px;\n    margin: 10px 0;\n    border: 2px solid #333;\n    background-color: white;\n    page-break-inside: avoid;\n}\n\n/* SVG Line Elements */\n#staticrunglist svg line {\n    stroke: black;\n    stroke-width: 2;\n}\n\n/* SVG Circle Elements \\(junction points\\) */\n#staticrunglist svg circle {\n    stroke: black;\n    stroke-width: 2;\n    fill: black;\n}\n\n/* SVG Rectangle Elements \\(contact/coil boxes\\) */\n#staticrunglist svg rect {\n    stroke: black;\n    stroke-width: 1;\n    fill: none;\n}\n\n/* SVG Ellipse Elements \\(blocks\\) */\n#staticrunglist svg ellipse {\n    stroke: black;\n    stroke-width: 2;\n    fill: none;\n}\n\n/* SVG Text \\(addresses\\) */\n#staticrunglist svg text {\n    font-family: Arial, sans-serif;\n    font-size: 12px;\n    fill: black;\n    text-anchor: middle;\n}\n\n/* Ladder styles for display */\n.ladderstyles {\n    stroke: blue;\n    stroke-width: 0.5px;\n}\n\n.ladderdisplaystyle {\n    stroke: blue;\n    stroke-width: 0.5px;\n    fill: whitesmoke;\n}\n\n/* Subroutine header */\n.sbrstyle {\n    stroke: black;\n    fill: lightgrey;\n    stroke-width: 1.0px;\n}\n\n/* Comments */\n.commentstyle {\n    stroke: black;\n    fill: wheat;\n}\n\n/* Rung style */\n.rungstyle {\n    stroke: black;\n    fill: olivedrab;\n}\n\n/* Monitoring colors */\n.MB_ladderoff {\n    stroke: blue;\n    stroke-width: 0.5px;\n}\n\n.MB_ladderon {\n    stroke: red;\n    stroke-width: 2.0px;\n}\n\n/* Rung container */\n#ladderdispprototype {\n    display: block;\n}\n\n/* Hide prototypes */\n#ladderprototypes {\n    display: none;\n}\n\n/* Edit cell styling */\n.emptyeditcell {\n    stroke: black;\n    stroke-width: 0.5px;\n}\n\n/* Page layout */\nbody {\n    font-family: Arial, sans-serif;\n    margin: 10px;\n    padding: 10px;\n    background-color: #fff;\n}\n\nh1 {\n    color: #333;\n    border-bottom: 2px solid #007bff;\n    padding-bottom: 10px;\n}\n\nh2 {\n    color: #555;\n    margin-top: 20px;\n}\n\n/* Statistics display */\n#statistics {\n    margin: 10px 0;\n    padding: 10px;\n    background-color: #f9f9f9;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-family: monospace;\n}\n\n#statistics p {\n    margin: 5px 0;\n}\nEOF)",
      "Bash(__NEW_LINE_924d7756c2431c3b__ echo \"Created /css/ladder.css\")",
      "Bash(cat:*)",
      "Bash(__NEW_LINE_da17ff757fdc5c63__ python3 /tmp/analyze_branches.py)",
      "Bash(__NEW_LINE_f7053c7a0c92c046__ echo \"\")",
      "Bash(__NEW_LINE_f5eece99b58de5c5__ echo \"\")",
      "Bash(/Users/gregorybrooks/common-lisp/mblogic-cl/static/js/ladmonitor.js << 'EOF'\n/* MBLogic-CL Ladder Monitor\n   Loads ladder diagram from API and displays it\n*/\n\nvar LadDisplay = null;\nvar CurrentSubroutine = \"main\";\n\n// Initialize on page load\ndocument.addEventListener\\(\"DOMContentLoaded\", function\\(\\) {\n    console.log\\(\"Ladder Monitor: Initializing...\"\\);\n    \n    // Initialize the display library\n    LadDisplay = new LadSubrDisp\\(document\\);\n    \n    // Load subroutine list\n    loadSubroutineList\\(\\);\n    \n    // Load initial ladder diagram\n    loadLadderDiagram\\(\"main\"\\);\n    \n    // Setup event handlers\n    document.getElementById\\(\"subr-select\"\\).addEventListener\\(\"change\", function\\(e\\) {\n        CurrentSubroutine = e.target.value;\n        loadLadderDiagram\\(CurrentSubroutine\\);\n    }\\);\n    \n    document.getElementById\\(\"btn-start\"\\).addEventListener\\(\"click\", startPLC\\);\n    document.getElementById\\(\"btn-stop\"\\).addEventListener\\(\"click\", stopPLC\\);\n    document.getElementById\\(\"btn-step\"\\).addEventListener\\(\"click\", stepPLC\\);\n    document.getElementById\\(\"btn-monitor\"\\).addEventListener\\(\"click\", updateMonitor\\);\n}\\);\n\nfunction loadSubroutineList\\(\\) {\n    console.log\\(\"Loading subroutine list...\"\\);\n    fetch\\(\"/api/subroutines\"\\)\n        .then\\(response => response.json\\(\\)\\)\n        .then\\(data => {\n            const selectElement = document.getElementById\\(\"subr-select\"\\);\n            selectElement.innerHTML = \"\";\n            \n            data.subroutines.forEach\\(name => {\n                const option = document.createElement\\(\"option\"\\);\n                option.value = name;\n                option.textContent = name;\n                selectElement.appendChild\\(option\\);\n            }\\);\n            \n            console.log\\(\"Loaded \" + data.subroutines.length + \" subroutines\"\\);\n        }\\)\n        .catch\\(error => console.error\\(\"Error loading subroutines:\", error\\)\\);\n}\n\nfunction loadLadderDiagram\\(subroutineName\\) {\n    console.log\\(\"Loading ladder diagram for: \" + subroutineName\\);\n    \n    fetch\\(\"/api/ladder-js?subrname=\" + encodeURIComponent\\(subroutineName\\)\\)\n        .then\\(response => response.json\\(\\)\\)\n        .then\\(data => {\n            console.log\\(\"Received rung data: \" + data.rungdata.length + \" rungs\"\\);\n            \n            // Clear existing rungs\n            const container = document.getElementById\\(\"staticrunglist\"\\);\n            container.innerHTML = \"\";\n            \n            // Add subroutine name and comments\n            const subheader = document.createElement\\(\"h2\"\\);\n            subheader.textContent = \"SBR \" + data.subroutinename;\n            container.appendChild\\(subheader\\);\n            \n            if \\(data.subrcomments\\) {\n                const comments = document.createElement\\(\"p\"\\);\n                comments.textContent = data.subrcomments;\n                container.appendChild\\(comments\\);\n            }\n            \n            // Create rungs using LadDisplay\n            LadDisplay.CreateRungList\\(data\\);\n            \n            console.log\\(\"Ladder diagram loaded successfully\"\\);\n        }\\)\n        .catch\\(error => {\n            console.error\\(\"Error loading ladder diagram:\", error\\);\n            document.getElementById\\(\"staticrunglist\"\\).innerHTML = \n                \"<p style='color: red;'>Error loading ladder diagram: \" + error + \"</p>\";\n        }\\);\n}\n\nfunction startPLC\\(\\) {\n    console.log\\(\"Starting PLC...\"\\);\n    fetch\\(\"/api/control/start\", { method: \"POST\" }\\)\n        .then\\(response => response.json\\(\\)\\)\n        .then\\(data => {\n            console.log\\(\"PLC started:\", data\\);\n            updateMonitor\\(\\);\n        }\\);\n}\n\nfunction stopPLC\\(\\) {\n    console.log\\(\"Stopping PLC...\"\\);\n    fetch\\(\"/api/control/stop\", { method: \"POST\" }\\)\n        .then\\(response => response.json\\(\\)\\)\n        .then\\(data => {\n            console.log\\(\"PLC stopped:\", data\\);\n            updateMonitor\\(\\);\n        }\\);\n}\n\nfunction stepPLC\\(\\) {\n    console.log\\(\"Single step PLC...\"\\);\n    fetch\\(\"/api/control/step\", { method: \"POST\" }\\)\n        .then\\(response => response.json\\(\\)\\)\n        .then\\(data => {\n            console.log\\(\"PLC stepped:\", data\\);\n            updateMonitor\\(\\);\n        }\\);\n}\n\nfunction updateMonitor\\(\\) {\n    fetch\\(\"/api/statistics\"\\)\n        .then\\(response => response.json\\(\\)\\)\n        .then\\(data => {\n            document.getElementById\\(\"status-running\"\\).textContent = data.running ? \"Running\" : \"Stopped\";\n            document.getElementById\\(\"status-running\"\\).className = \n                \"status-value \" + \\(data.running ? \"running\" : \"stopped\"\\);\n            document.getElementById\\(\"status-scan-count\"\\).textContent = data.scan_count || 0;\n            document.getElementById\\(\"status-scan-time\"\\).textContent = \n                \\(\\(data.scan_time || 0\\) / 1000\\).toFixed\\(2\\) + \" ms\";\n        }\\);\n}\nEOF)",
      "Bash(__NEW_LINE_8bb2bb20dd5254a1__ echo \"Created /js/ladmonitor.js\")",
      "Bash(/Users/gregorybrooks/common-lisp/mblogic-cl/static/js/servercomm.js << 'EOF'\n/* Server Communication Utilities\n   Stub for any server communication functions\n*/\n\n// Log initialization\nconsole.log\\(\"Server communication module loaded\"\\);\nEOF)",
      "Bash(__NEW_LINE_d6c81d64b80fbef6__ echo \"Created /js/servercomm.js\")",
      "Bash(lsof:*)",
      "Bash(for branch in branchtr branchtl branchr branchl)",
      "Bash(do)",
      "Bash(echo:*)",
      "Bash(done)",
      "Bash(xmllint:*)"
    ]
  }
}
